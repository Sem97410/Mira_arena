[gd_scene load_steps=13 format=3 uid="uid://bg5vsni1jl6bu"]

[ext_resource type="PackedScene" uid="uid://dqhf6iwnkfljx" path="res://library/002_gameplay_concepts/001_player/Animations/Animation_exportTest_.fbx" id="1_nkucb"]
[ext_resource type="Script" path="res://library/002_gameplay_concepts/001_player/Scripts/add_gravity.gd" id="3_g1l1p"]
[ext_resource type="Script" path="res://library/002_gameplay_concepts/001_player/Scripts/MoveTheCharacter.gd" id="4_e1w3e"]
[ext_resource type="AnimationNodeBlendTree" uid="uid://dykrxjekod4ri" path="res://library/002_gameplay_concepts/001_player/Scripts/Resources/player_animation_tree_structure.tres" id="5_0v0ft"]
[ext_resource type="Script" path="res://library/002_gameplay_concepts/001_player/Scripts/PlayerMovementResource.gd" id="5_vj4om"]
[ext_resource type="Script" path="res://library/002_gameplay_concepts/001_player/Scripts/assign_blend_position.gd" id="6_cnqdl"]
[ext_resource type="Script" path="res://library/002_gameplay_concepts/001_player/Scripts/HandleAnimationSpeed.gd" id="7_nevpl"]
[ext_resource type="Script" path="res://library/002_gameplay_concepts/001_player/Scripts/check_index_animation.gd" id="8_5pwg2"]
[ext_resource type="Script" path="res://library/002_gameplay_concepts/001_player/Scripts/launch_light_attack_animation.gd" id="9_4v75s"]
[ext_resource type="Script" path="res://library/002_gameplay_concepts/001_player/Scripts/handle_state_transition.gd" id="10_26jxu"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_qjoqe"]
radius = 0.4
height = 1.8

[sub_resource type="Resource" id="Resource_0lh1u"]
script = ExtResource("5_vj4om")

[node name="Mira" type="CharacterBody3D"]

[node name="Animation_exportTest_" parent="." instance=ExtResource("1_nkucb")]

[node name="Skeleton3D" parent="Animation_exportTest_/Group/DeformationSystem" index="0"]
bones/1/position = Vector3(0.0332557, 0.778405, 0.278667)
bones/1/rotation = Quaternion(0.571071, 0.435507, 0.55518, 0.419506)
bones/2/rotation = Quaternion(0.0678768, 0.994355, 0.0805801, 0.012598)
bones/2/scale = Vector3(1, 1, 1)
bones/3/position = Vector3(0.133626, 5.28882e-14, 1.18899e-10)
bones/3/rotation = Quaternion(0.0273534, 1.2324e-23, 3.18655e-21, 0.999626)
bones/4/rotation = Quaternion(0.0273534, 0, 0, 0.999626)
bones/5/rotation = Quaternion(0.0229266, 0.0146456, -0.540155, 0.841126)
bones/6/position = Vector3(0.332143, 1.31839e-13, 2.93062e-10)
bones/6/rotation = Quaternion(0.0144456, -0.00372119, -0.211999, 0.977156)
bones/7/position = Vector3(0.0822142, 0.123556, 2.10646e-09)
bones/7/rotation = Quaternion(-0.00592427, 0.0065994, 0.577465, 0.816367)
bones/9/position = Vector3(0.0677995, -0.0508652, 4.87399e-11)
bones/9/rotation = Quaternion(0, 5.20417e-18, -1.38778e-17, 1)
bones/10/position = Vector3(0.0423429, 0.0508652, 4.87399e-11)
bones/10/rotation = Quaternion(0, 5.20417e-18, -1.38778e-17, 1)
bones/11/rotation = Quaternion(0.01179, 0.00746726, -0.312422, 0.949841)
bones/12/position = Vector3(0.00325016, -0.0688498, -1.77636e-17)
bones/13/position = Vector3(-0.00390193, 0.0690468, 0)
bones/14/position = Vector3(0.0639645, -0.0581415, 6.97476e-11)
bones/15/position = Vector3(0.0931277, 0.0581415, 6.97476e-11)
bones/16/position = Vector3(0.0471296, -2.77556e-17, -5.62592e-18)
bones/16/rotation = Quaternion(0.0171645, 0.000585791, 0.0543347, 0.998375)
bones/16/scale = Vector3(1, 1, 1)
bones/17/position = Vector3(0.0471296, -2.77556e-17, -5.62592e-18)
bones/17/rotation = Quaternion(0.0171645, 0.000585791, 0.0543347, 0.998375)
bones/17/scale = Vector3(1, 1, 1)
bones/18/position = Vector3(0.0471296, -8.32667e-17, -1.06461e-17)
bones/18/rotation = Quaternion(0.0300598, 0.00224719, 0.0721688, 0.996937)
bones/19/position = Vector3(0.0356815, 4.85723e-17, -1.32845e-17)
bones/19/rotation = Quaternion(0.0301436, 6.93824e-05, -5.22406e-05, 0.999546)
bones/20/position = Vector3(0.0356815, 1.73472e-17, -1.32845e-17)
bones/20/rotation = Quaternion(0.0301436, 6.93824e-05, -5.22406e-05, 0.999546)
bones/21/position = Vector3(0.0356815, -1.35308e-16, -1.74419e-17)
bones/21/rotation = Quaternion(0.000642722, -2.90134e-05, -0.0450954, 0.998982)
bones/21/scale = Vector3(1, 1, 1)
bones/22/position = Vector3(0.116115, 3.33067e-16, 3.78446e-17)
bones/22/rotation = Quaternion(-0.0516492, -0.00176179, -0.0374556, 0.997961)
bones/23/position = Vector3(0.0299284, -2.91434e-16, -9.4181e-18)
bones/23/rotation = Quaternion(-0.0516701, -0.000973301, -0.0526824, 0.997273)
bones/24/position = Vector3(0.0299284, 4.44089e-16, -9.4181e-18)
bones/24/rotation = Quaternion(-0.0516701, -0.0009733, -0.0526824, 0.997273)
bones/25/position = Vector3(0.0299284, -3.33067e-16, -1.06708e-17)
bones/25/rotation = Quaternion(-6.46833e-27, -2.63296e-18, 0.0429996, 0.999075)
bones/30/position = Vector3(0.105377, 6.43929e-15, -1.9762e-14)
bones/30/rotation = Quaternion(-0.155089, 0.41425, 0.484623, 0.754642)
bones/31/position = Vector3(0.0802278, -9.4369e-16, 2.22045e-15)
bones/31/rotation = Quaternion(-0.00825946, -2.83969e-23, 4.61038e-21, 0.999966)
bones/32/position = Vector3(0.0802278, -8.88178e-16, 1.9984e-15)
bones/32/rotation = Quaternion(-0.00825946, -2.83969e-23, 4.61038e-21, 0.999966)
bones/33/position = Vector3(0.0802278, 1.66533e-16, -4.44089e-16)
bones/33/rotation = Quaternion(-0.00933471, 0.0528984, 0.583319, 0.810465)
bones/34/position = Vector3(0.07005, 1.94289e-16, 1.89848e-14)
bones/34/rotation = Quaternion(0.0360405, 3.19427e-20, -7.1595e-20, 0.99935)
bones/35/position = Vector3(0.07005, 5.55112e-17, 1.78746e-14)
bones/35/rotation = Quaternion(0.0360405, 3.19427e-20, -7.1595e-20, 0.99935)
bones/36/position = Vector3(0.07005, 3.05311e-16, 1.86517e-14)
bones/36/rotation = Quaternion(0.0371596, -0.0515459, 0.118531, 0.990915)
bones/36/scale = Vector3(1, 1, 1)
bones/37/position = Vector3(0.114317, 3.53884e-16, 5.55112e-16)
bones/37/rotation = Quaternion(0.0153722, 0.239247, -0.112986, 0.96424)
bones/38/position = Vector3(0.0287864, -9.71445e-16, -3.33067e-16)
bones/38/rotation = Quaternion(-0.00396977, 0.158763, 0.0264722, 0.986954)
bones/41/position = Vector3(0.0388226, 2.498e-16, 2.06432e-16)
bones/41/rotation = Quaternion(0.0249867, 0.0466412, 0.0657023, 0.996435)
bones/42/position = Vector3(0.0256132, -1.52656e-16, 5.34295e-16)
bones/42/rotation = Quaternion(-0.000387033, -0.00383166, -0.0115081, 0.999926)
bones/44/rotation = Quaternion(0.00374139, 0.228015, 0.0393873, 0.972854)
bones/45/position = Vector3(0.0242924, -7.63278e-17, 9.37916e-12)
bones/45/rotation = Quaternion(0.00150427, 0.141743, -0.0089155, 0.989862)
bones/47/rotation = Quaternion(0.189505, 0.00321248, 0.0266517, 0.981513)
bones/48/rotation = Quaternion(-0.0517104, 0.19078, -0.372322, 0.906811)
bones/49/position = Vector3(0.0323767, -9.99201e-16, 3.33067e-16)
bones/49/rotation = Quaternion(-0.00157905, 0.211438, 0.0237087, 0.977103)
bones/51/rotation = Quaternion(-0.0502291, 0.202483, -0.202128, 0.956882)
bones/52/position = Vector3(0.0266553, 4.996e-16, -1.09912e-14)
bones/52/rotation = Quaternion(0.0071522, 0.163582, -0.0662664, 0.984276)
bones/54/rotation = Quaternion(0.701761, 0.426554, -0.516152, -0.243247)
bones/55/position = Vector3(-0.105377, -4.38538e-15, 1.28786e-14)
bones/55/rotation = Quaternion(-0.0652892, 0.270213, 0.582333, 0.763944)
bones/56/position = Vector3(-0.0802278, 7.21645e-16, -1.55431e-15)
bones/56/rotation = Quaternion(0.00493958, -1.37463e-21, 9.464e-20, 0.999988)
bones/56/scale = Vector3(1, 1, 1)
bones/57/position = Vector3(-0.0802278, -1.55431e-15, 2.33147e-15)
bones/57/rotation = Quaternion(0.00493958, -1.37463e-21, 9.464e-20, 0.999988)
bones/57/scale = Vector3(1, 1, 1)
bones/58/position = Vector3(-0.0802278, 3.33067e-16, -1.44329e-15)
bones/58/rotation = Quaternion(0.00136987, 0.0114776, 0.662684, 0.74881)
bones/59/position = Vector3(-0.07005, 2.77556e-17, -1.80966e-14)
bones/59/rotation = Quaternion(0.0347256, 1.98193e-21, 7.9326e-20, 0.999397)
bones/60/position = Vector3(-0.07005, -5.27356e-16, -1.90958e-14)
bones/60/rotation = Quaternion(0.0347256, 1.98193e-21, 7.9326e-20, 0.999397)
bones/61/position = Vector3(-0.07005, 1.66533e-16, -1.80966e-14)
bones/61/rotation = Quaternion(0.0358417, -0.0514005, 0.118199, 0.991011)
bones/62/position = Vector3(-0.114317, 2.84495e-16, -5.55112e-16)
bones/62/rotation = Quaternion(0.0165898, 0.249633, -0.112814, 0.961604)
bones/63/position = Vector3(-0.0287864, 1.57473e-16, 1.93969e-16)
bones/63/rotation = Quaternion(-0.00425504, 0.169398, 0.0264278, 0.985184)
bones/63/scale = Vector3(1, 1, 1)
bones/65/position = Vector3(-0.0118406, -0.0131223, 0.0222024)
bones/66/position = Vector3(-0.0388226, -4.996e-16, 6.93022e-16)
bones/66/rotation = Quaternion(0.0144965, 0.200587, 0.0687821, 0.977151)
bones/67/position = Vector3(-0.0256132, -3.46945e-16, -6.245e-16)
bones/67/rotation = Quaternion(0.00140212, 0.151266, -0.0114289, 0.988426)
bones/69/rotation = Quaternion(0.00314167, 0.238473, 0.0404886, 0.9703)
bones/70/position = Vector3(-0.0242924, 1.11022e-16, -9.37928e-12)
bones/70/rotation = Quaternion(0.00160033, 0.15241, -0.00889876, 0.988276)
bones/72/rotation = Quaternion(0.189505, 0.00321248, 0.0266517, 0.981513)
bones/73/rotation = Quaternion(-0.0474152, 0.20024, -0.374331, 0.904175)
bones/74/position = Vector3(-0.0323767, 5.55112e-17, -5.55112e-16)
bones/74/rotation = Quaternion(-0.00183466, 0.221964, 0.0236903, 0.974765)
bones/76/rotation = Quaternion(-0.0479011, 0.21269, -0.203435, 0.954506)
bones/77/position = Vector3(-0.0266553, -1.58207e-15, 1.16573e-14)
bones/77/rotation = Quaternion(0.00786646, 0.174188, -0.0661854, 0.982454)
bones/79/rotation = Quaternion(0.918388, -0.385932, -0.0201984, 0.0849211)
bones/79/scale = Vector3(1, 1, 1)
bones/80/position = Vector3(-0.133626, -8.40764e-10, -1.18899e-10)
bones/80/rotation = Quaternion(0.0527691, 3.0577e-21, -2.72887e-21, 0.998607)
bones/80/scale = Vector3(1, 1, 1)
bones/81/rotation = Quaternion(0.0527691, 0, 0, 0.998607)
bones/82/rotation = Quaternion(0.0523277, 0.00570913, -0.115168, 0.99195)
bones/83/position = Vector3(-0.332143, -2.08982e-09, -2.65325e-10)
bones/83/rotation = Quaternion(-0.0119225, -0.0585312, -0.266132, 0.962084)
bones/83/scale = Vector3(1, 1, 1)
bones/84/position = Vector3(-0.0822142, -0.123556, -4.41676e-10)
bones/84/rotation = Quaternion(-0.00525587, 0.0047821, 0.577135, 0.816618)
bones/86/position = Vector3(-0.0540632, -0.0508652, -5.10738e-09)
bones/86/rotation = Quaternion(6.93889e-18, 8.67362e-19, 0, 1)
bones/87/position = Vector3(-0.0566351, 0.0508652, -4.90395e-09)
bones/87/rotation = Quaternion(6.93889e-18, 8.67362e-19, 0, 1)
bones/88/rotation = Quaternion(0.0261554, 0.00293545, -0.0900106, 0.995593)
bones/89/position = Vector3(0.00390193, -0.0576456, -4.47938e-09)
bones/90/position = Vector3(-0.00325016, 0.0584112, -4.25891e-09)
bones/91/position = Vector3(-0.0797308, -0.0581415, -3.912e-09)
bones/92/position = Vector3(-0.076791, 0.0581415, -3.76168e-09)

[node name="Skeleton3D" parent="Animation_exportTest_/Rig_Vorace_DONTTOUCH" index="0"]
bones/0/position = Vector3(0.557159, 0.309843, -0.538085)
bones/0/rotation = Quaternion(0.601738, 0.38215, 0.576287, 0.399709)
bones/1/position = Vector3(0.254236, 0.0164775, 0.00543703)
bones/1/rotation = Quaternion(-3.23159e-27, 0.0159495, 9.76625e-19, 0.999873)
bones/2/position = Vector3(0.727903, 1.22779e-18, -0.0200514)
bones/2/rotation = Quaternion(0, 0.0265056, 1.623e-18, 0.999649)
bones/3/position = Vector3(0.452736, -8.45528e-19, 0.0138085)
bones/3/rotation = Quaternion(0, -3.46945e-18, -9.62965e-35, 1)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9, 0)
shape = SubResource("CapsuleShape3D_qjoqe")

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../Animation_exportTest_")
tree_root = ExtResource("5_0v0ft")
anim_player = NodePath("../Animation_exportTest_/AnimationPlayer")
parameters/MiraAnimation/conditions/IsDealingWithHealth = false
parameters/MiraAnimation/conditions/IsFighting = false
parameters/MiraAnimation/conditions/IsMoving = false
parameters/MiraAnimation/conditions/is_dead = false
parameters/MiraAnimation/FightStateMachine/conditions/is_charged_attacking = true
parameters/MiraAnimation/FightStateMachine/conditions/is_light_attacking = true
parameters/MiraAnimation/FightStateMachine/conditions/is_stopping_attacking = true
parameters/MiraAnimation/MovementStateMachine/MovementBlendTree/MovementBlendSpace/blend_position = 6.98704
parameters/MiraAnimation/MovementStateMachine/MovementBlendTree/TimeScale/scale = 1.0
parameters/TimeScale/scale = 1.0

[node name="MovementComponent" type="Node" parent="."]

[node name="AddGravity" type="Node" parent="MovementComponent" node_paths=PackedStringArray("player")]
script = ExtResource("3_g1l1p")
player = NodePath("../..")

[node name="MovePlayer" type="Node" parent="MovementComponent" node_paths=PackedStringArray("player", "animation_tree")]
script = ExtResource("4_e1w3e")
player_movement_resource = SubResource("Resource_0lh1u")
player = NodePath("../..")
animation_tree = NodePath("../../AnimationTree")

[node name="HandleMovementAnimation" type="Node" parent="MovementComponent" node_paths=PackedStringArray("player", "animation_tree")]
script = ExtResource("6_cnqdl")
player = NodePath("../..")
animation_tree = NodePath("../../AnimationTree")

[node name="HandleMovementAnimationSpeed" type="Node" parent="MovementComponent" node_paths=PackedStringArray("player", "animation_tree")]
script = ExtResource("7_nevpl")
player = NodePath("../..")
animation_tree = NodePath("../../AnimationTree")

[node name="LaunchMovementVFX" type="Node" parent="MovementComponent"]

[node name="LaunchMovementSound" type="Node" parent="MovementComponent"]

[node name="DashComponent" type="Node" parent="."]

[node name="CheckDashDestination" type="Node" parent="DashComponent"]

[node name="LaunchDashMovement" type="Node" parent="DashComponent"]

[node name="LaunchDashVFX" type="Node" parent="DashComponent"]

[node name="LaunchDashSound" type="Node" parent="DashComponent"]

[node name="AttackComponent" type="Node" parent="."]

[node name="LightAttackComponent" type="Node" parent="AttackComponent"]

[node name="CheckIndexAnimation" type="Node" parent="AttackComponent/LightAttackComponent"]
script = ExtResource("8_5pwg2")

[node name="LaunchLightAttackAnimation" type="Node" parent="AttackComponent/LightAttackComponent" node_paths=PackedStringArray("animation_tree", "animation_player", "index_animation_script")]
script = ExtResource("9_4v75s")
animation_tree = NodePath("../../../AnimationTree")
animation_player = NodePath("../../../Animation_exportTest_/AnimationPlayer")
index_animation_script = NodePath("../CheckIndexAnimation")

[node name="LaunchLightAttackVFX" type="Node" parent="AttackComponent/LightAttackComponent"]

[node name="LaunchLightAttackSound" type="Node" parent="AttackComponent/LightAttackComponent"]

[node name="ChargeAttackComponent" type="Node" parent="AttackComponent"]

[node name="HandleChargeAttackMovement" type="Node" parent="AttackComponent/ChargeAttackComponent"]

[node name="LaunchChargeAttackAnimation" type="Node" parent="AttackComponent/ChargeAttackComponent"]

[node name="LaunchChargeAttackVFX" type="Node" parent="AttackComponent/ChargeAttackComponent"]

[node name="LaunchChargeAttackSound" type="Node" parent="AttackComponent/ChargeAttackComponent"]

[node name="HealthComponent" type="Node" parent="."]

[node name="LaunchTakeDamage" type="Node" parent="HealthComponent"]

[node name="LaunchDamageVFX" type="Node" parent="HealthComponent"]

[node name="CheckLifePoint" type="Node" parent="HealthComponent"]

[node name="ManageDieMovement" type="Node" parent="HealthComponent"]

[node name="LaunchDieVFX" type="Node" parent="HealthComponent"]

[node name="LaunchDieSound" type="Node" parent="HealthComponent"]

[node name="LaunchEndGame" type="Node" parent="HealthComponent"]

[node name="HandleStateTransition" type="Node" parent="." node_paths=PackedStringArray("animation_tree", "player_is_moving_script", "player_launch_attack_animation")]
script = ExtResource("10_26jxu")
Summary = "24/01/2025
- Handle when we are suppose to move from different StateMachine"
animation_tree = NodePath("../AnimationTree")
player_is_moving_script = NodePath("../MovementComponent/MovePlayer")
player_launch_attack_animation = NodePath("../AttackComponent/LightAttackComponent/LaunchLightAttackAnimation")

[editable path="Animation_exportTest_"]
